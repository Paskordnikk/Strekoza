# Инструкция по деплою

## Быстрый старт

1. **Установите зависимости:**
   ```bash
   npm install
   ```

2. **Проверьте локальную сборку:**
   ```bash
   npm run build
   ```
   Проверьте, что папка `dist/` создалась и содержит все необходимые файлы.

3. **Настройте GitHub Pages:**
   - Перейдите в Settings → Pages вашего репозитория
   - В разделе "Source" выберите "GitHub Actions"
   - Сохраните изменения

4. **Запушьте изменения:**
   ```bash
   git add .
   git commit -m "Настройка Vite и GitHub Actions"
   git push origin master
   ```

5. **Проверьте деплой:**
   - Перейдите в раздел "Actions" вашего репозитория
   - Дождитесь завершения workflow "Build and Deploy to GitHub Pages"
   - После успешного деплоя ваш сайт будет доступен по адресу GitHub Pages

## Что происходит при деплое

1. GitHub Actions автоматически запускается при каждом push в ветку `master` или `main`
2. Устанавливаются зависимости Node.js
3. Проект собирается через Vite (`npm run build`)
4. Собранные файлы из папки `dist/` автоматически публикуются на GitHub Pages

## Структура после настройки

```
KARTA/
├── src/              # Исходные файлы фронтенда
│   ├── index.html
│   ├── login.html
│   ├── script.js
│   ├── login.js
│   └── style.css
├── public/           # Статические файлы
│   └── favicon.ico
├── dist/             # Собранные файлы (генерируется автоматически, не коммитится)
├── .github/
│   └── workflows/
│       └── deploy.yml  # GitHub Actions workflow
├── vite.config.js    # Конфигурация Vite
├── package.json       # Зависимости и скрипты
└── .gitignore        # Исключения для Git
```

## Важные замечания

- **Папка `dist/` не коммитится** в репозиторий (добавлена в `.gitignore`)
- **Исходные файлы** остаются в репозитории для разработки
- **Серверные файлы** (`server.py`, `strm/`, `requirements.txt`) остаются в репозитории, но не используются для фронтенда
- **GitHub Actions** автоматически создает папку `dist/` при каждой сборке

## Локальная разработка

Для локальной разработки используйте:

```bash
npm run dev
```

Это запустит dev-сервер Vite на `http://localhost:3000` с hot-reload.

## Решение проблем

### Сайт не обновляется после деплоя

1. Проверьте статус workflow в разделе "Actions"
2. Убедитесь, что сборка прошла успешно
3. Очистите кеш браузера (Ctrl+Shift+R или Cmd+Shift+R)

### Ошибки при сборке

1. Проверьте, что все зависимости установлены: `npm install`
2. Проверьте консоль GitHub Actions на наличие ошибок
3. Убедитесь, что все файлы в папке `src/` на месте

### Проблемы с путями

Если сайт размещен не в корне (например, `username.github.io/repo-name`), обновите `base` в `vite.config.js`:

```javascript
base: '/repo-name/',
```

